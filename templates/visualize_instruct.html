{% extends "base.html" %}

{% block title %}
InstructScore Visualizer
{% endblock %}

{% block content %}


<body>
    <!-- <div class="fixed-header">
        <h1 class="custom-text">InstructScore Visualizer</h1>
    </div> -->
    <div class = "content-holder">
        {% for evaluation in input_data%}
            <div class="container">        
                <div>
                <h1 class="pred-ref"> Prediction: </h1>
                {% for key, value in evaluation.prediction.items() %}
                    {% if value == "None" %}
                        <span class="description">{{ key }}</span>
                    {% elif value is mapping %}
                        {% if value.error_scale == "Minor" %}
                            <span class="orange-text">{{ key }}</span>
                        {% else %}
                            <span class="red-text">{{ key }}</span>
                        {% endif %}
                        <span class="tooltip">
                            Error Type: {{ value.error_type }}<br>
                            Error Location: {{ value.error_location }}<br>
                            Major/minor: {{ value.error_scale }}<br>
                            Error explanation: {{ value.error_explanation }}
                        </span>
                    {% else %}
                        {{ value }}
                    {% endif %}
                    {% if not loop.last %} {% endif %}
                {% endfor %}
                </div>

                <div> 
                    <h1 class="pred-ref" > Reference: </h1>            
                    <span class="description">{{ evaluation.reference }}</span>
                </div>
            </div>
        {% endfor %}
    </div>

    <script>
        // JavaScript to show tooltip on hover
        const tooltips = document.querySelectorAll('.tooltip');

        tooltips.forEach((tooltip) => {
            const parent = tooltip.previousElementSibling;
            parent.addEventListener('mouseover', (e) => {
                tooltip.style.display = 'block';
                tooltip.style.left = `${e.pageX}px`; // Set tooltip horizontal position
                tooltip.style.top = `${e.pageY}px`; // Set tooltip vertical position
            });

            parent.addEventListener('mouseout', () => {
                tooltip.style.display = 'none';
            });
        });
    </script>
</body>
{% endblock %}
